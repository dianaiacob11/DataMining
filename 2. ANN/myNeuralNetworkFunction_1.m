function [y1] = myNeuralNetworkFunction_1(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 29-Aug-2016 18:23:37.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = Qx20 matrix, input #1
% and returns:
%   y = Qx1 matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1.81298890444903;-1.82644539952762;-1.71314619722317;-0.552809282072013;-3.81388359338606;-1.64248638513459;-2.72102723826689;-1.98243136610361;-4.49899719313604;-4.76206776589928;-1.2971565707103;-3.05515553518928;-5.08904137808394;-3.2010279804066;-4.5165014938401;-2.69990177893453;-1.96471142241937;-2.68260553411123;-10.378397495903;-16.2437950372185];
x1_step1.gain = [0.464111237052567;0.516069462618255;0.498085037199588;0.489004549254642;0.344220162688516;0.343650010803902;0.361364311886382;0.453361965443406;0.376157034427153;0.360473247198609;0.445094094396539;0.356293122520591;0.310425564766547;0.384781173701587;0.299248519667761;0.240227305214858;0.214306338531789;0.252919689184369;0.14059393871613;0.0773855786748524];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.8630415155402633;1.7156324817840098;1.5173552823679328;1.8723182691277362;-0.72940243486187473;-0.21527989234766906;0.034291391651681824;0.14057810683251676;-2.4296701629294293;0.098219920520462481;-0.56139293319462702;1.0268381571011984;1.2454576444325727;-1.7742173614448955;2.2583938592546597];
IW1_1 = [-0.32988692386729596 0.57412442216209114 -0.45245574227223961 -0.045474655121103352 -0.58348860895511401 -0.081880710186607003 -0.19877085644552017 -0.43759619278585538 0.40149596938481302 -0.010214879244754803 -0.053959072900668197 -0.2588122412380322 -0.43727794687788557 -0.10641476451479467 0.38475666359791316 -0.0064657891436538974 0.37004459934813083 0.15426025355787859 -0.37424912731984283 -0.37392873606132448;-0.59314859858447799 0.66593658495244934 -0.073965534681120187 0.457831720950098 0.59248690664699022 0.13033829276638695 1.0286826256540558 -1.0297687789159922 0.40690997748532104 0.24244844920180109 -0.43691703996582093 -0.12348688426204626 0.47917989878183459 0.32727502912465867 0.23946555192188068 0.23770278554545246 -0.52453838494109828 -0.18369167975517495 0.41098718101704257 -0.10777316796383174;-0.05260752526492176 -0.32287350520110103 -0.19138148789260076 0.10277734682666391 0.69042123438670111 0.27409211971033187 -0.32346798039469538 0.29982373083978625 -0.31456704004113301 -1.359992960865648 -0.12774452215901089 0.087955078417531377 -0.21487131212622521 -0.54078434373451045 1.4139415799953898 -0.87348812118020336 -1.3515171920171543 4.4999852851551756 -0.60465725983277707 0.86306951920269592;-0.46639760593435525 0.19219901242366086 -0.13291419838892371 -0.00086331438224860376 -0.5435661359143299 -0.46403554650008128 -0.13171603930825171 -0.0071854138792023367 -0.22192719183502529 0.18312496312893328 -0.1153899174033735 -0.12111174986901604 -0.41896370114185921 -0.082429318261995385 0.1863191602003629 -0.076515576241570585 0.10304560179916586 0.086233438993095324 -0.24328442499167088 -0.35743812782679679;0.10713828051861506 0.45383840938793779 0.34264844919802323 0.14028094570232608 0.048663361821802781 -0.39150438146690031 -0.12836747079093383 -0.15358458759023058 0.31917339566561825 -0.49827720832392919 0.39695459998372851 -0.47805285822720461 -0.51382344744022423 -0.32688926390917417 0.86472045459277791 0.3714320051712679 0.14151206241332887 1.4121998393829418 -0.57388253957800017 0.099313364682878047;-0.43249189960133089 -0.13172541921758013 -0.17975086918147623 -0.5746395712926754 -0.55227596261270095 0.66343070345576272 -0.6006683626037711 -0.91036813245050796 -0.66701757893431923 -0.51444593674806749 -0.15616481477932839 1.3426167159983522 -0.71903464328687472 0.21323546692944481 0.21521165304352083 -1.2980737247912706 0.98472146533430449 -0.30359520413624436 1.0558428507255067 2.314074360494633;0.13082187747369381 0.38153604705150201 0.49085545253337426 -0.073377847958066941 -0.79241108097988389 0.68451594908971192 -0.95483164504074403 0.24816744967917403 -0.69818924958359474 -0.17249845672616715 0.33862476155762194 -0.73078715767273306 -0.90170946208989999 -1.035861017338497 -0.21380504344435092 0.47090683593182925 1.1216753800506389 0.077121311019712896 -0.96014971052977893 4.7668776255853729;0.24432211703315321 0.53260920399457756 0.42703726787703422 0.77044974805370703 0.82499900299157158 -0.022410673170499076 0.44408491052146792 0.10310718961447783 0.81050364632477445 0.49496289825410394 0.65352773063564862 -1.0369339777755118 -0.045997557699399366 -0.0076526930248981906 -0.47898627625809098 1.3538426183992927 -0.51076741505343359 -1.4827468017423795 0.63065776126205364 -0.26473086217338515;-0.36148813187492335 -0.38660447843365425 -0.25201002980330212 -0.0038197497816000164 0.044539222891694756 0.5933037552159296 -1.1035968484573213 0.49369858376453507 0.23893733131008357 0.73321985750515895 0.33890451984907327 -1.9806777638070432 1.1730798905088957 -0.75018002499288516 1.4212472775339147 3.7489733980888502 2.1317929109827052 0.74988486144699518 -0.12018144509511935 3.2723991856445465;0.045197081154581639 -0.18055945845325624 0.10385198823438796 0.25738453607509126 -0.1170648493394766 -0.75607804215662866 0.58157252560605877 0.22968062575204137 -0.076709466671064944 -0.23951518398713373 0.40391870379536571 -1.3260262049868297 0.091560691210567979 -0.34626610142839193 -0.27074233418868332 0.56456503172217476 -0.65932210052201068 0.25272366827170006 -0.90301368813115435 -0.73654107090527199;-0.41890772492033412 -0.16634043284645336 -0.037795088096151071 0.17871778453482462 0.48384204170713868 -0.009816424095922479 0.057380976294795216 0.2862035363705846 -0.32988814833832886 -0.1737661001525195 -0.0081984136996300395 -0.75515864866260252 0.11653202906952602 0.0050806884822874503 0.58169354285385055 0.72518259864562362 -0.32893291942970471 0.31228451120423462 -0.55287321640263343 0.85945001865125126;-0.37926102298189818 0.85231015680369149 0.36375241146698706 -0.38630785982967125 -0.51961874087146398 -0.095077060213949599 0.70245920281186758 0.48974694057127077 0.16870013640250847 0.95745524280447114 -0.62728891255059738 -0.56543180010107386 1.1139745236818381 -0.38206141352794704 0.071954450610419898 -0.41056900528996892 0.62170745814279949 -0.0021869616861032162 0.74605127337536103 0.11576988888781664;0.50535456887041552 0.0023469669919305865 -0.044416123639359401 0.34834950296261225 0.0017417841340560771 -0.34186545504933286 0.72107106394531151 -0.55249152956330261 0.016068131568395112 0.24646199507870439 0.12781901983266236 0.2258372391348131 0.025546696785752832 -0.55925145625854256 -1.0539194755912622 -0.71562959307904916 0.40788051362813044 -0.49004269233191022 -0.602470222247527 -0.11807576069952919;0.15091942613343715 -0.32175405073703772 -0.33067376678304478 0.30365243594435271 -0.43149080955349756 0.10996888568273955 -0.078507671587928568 1.5248344663422908 -0.20526701091253771 0.68727595054820145 -0.43853108435795535 -0.15656514713453731 0.51409238498929588 -0.29021426051151444 0.017677967483293467 0.43365972220538601 -0.67701670732563646 1.1317440026244183 -0.19432835804380635 -0.30865468215309805;-0.013722982281392467 0.017419461602911662 0.019004210233749517 0.57787513792825496 0.053531136788899605 -0.63443484919329018 -0.21909166636806943 0.050162108427431656 -0.64435086008407227 0.14518803004776593 0.26224316809155562 -0.18389384890105978 -1.4453229054262406 0.34209972450719134 0.5849959697837066 -0.50542800030684276 0.29465062336412062 -2.5648790309149705 1.1821378733048058 0.36169021649645577];

% Layer 2
b2 = 0.39670444629564616;
LW2_1 = [0.0078013332072268318 -0.15992474375221472 -0.47300143913504977 0.25016311852418283 0.14872351400284509 0.37470473903893786 -0.51208475668946929 0.12924221422667009 -0.35434591592790232 -0.084936352256946651 0.37600633989756826 0.15751893168914644 0.279863940697471 0.16342222759889613 -0.27897920422066991];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.4;
y1_step1.xoffset = 1;

% ===== SIMULATION ========

% Dimensions
Q = size(x1,1); % samples

% Input 1
x1 = x1';
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
y1 = y1';
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
